!function($){var _z={view:{clearOldFirstNode:function(setting,node){for(var n=node.getNextNode();n;){if(n.isFirstNode){n.isFirstNode=!1,view.setNodeLineIcos(setting,n);break}if(n.isLastNode)break;n=n.getNextNode()}},clearOldLastNode:function(setting,node,openFlag){for(var n=node.getPreNode();n;){if(n.isLastNode){n.isLastNode=!1,openFlag&&view.setNodeLineIcos(setting,n);break}if(n.isFirstNode)break;n=n.getPreNode()}},makeDOMNodeMainBefore:function(html,setting,node){html.push("<li ",node.isHidden?"style='display:none;' ":"","id='",node.tId,"' class='",consts.className.LEVEL,node.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(setting,node,options){node.isHidden=!1,data.initShowForExCheck(setting,node),$$(node,setting).show()},showNodes:function(setting,nodes,options){if(nodes&&0!=nodes.length){var i,j,pList={};for(i=0,j=nodes.length;i<j;i++){var n=nodes[i];if(!pList[n.parentTId]){var pn=n.getParentNode();pList[n.parentTId]=null===pn?data.getRoot(setting):n.getParentNode()}view.showNode(setting,n,options)}for(var tId in pList){var children=pList[tId][setting.data.key.children];view.setFirstNodeForShow(setting,children),view.setLastNodeForShow(setting,children)}}},hideNode:function(setting,node,options){node.isHidden=!0,node.isFirstNode=!1,node.isLastNode=!1,data.initHideForExCheck(setting,node),view.cancelPreSelectedNode(setting,node),$$(node,setting).hide()},hideNodes:function(setting,nodes,options){if(nodes&&0!=nodes.length){var i,j,pList={};for(i=0,j=nodes.length;i<j;i++){var n=nodes[i];if((n.isFirstNode||n.isLastNode)&&!pList[n.parentTId]){var pn=n.getParentNode();pList[n.parentTId]=null===pn?data.getRoot(setting):n.getParentNode()}view.hideNode(setting,n,options)}for(var tId in pList){var children=pList[tId][setting.data.key.children];view.setFirstNodeForHide(setting,children),view.setLastNodeForHide(setting,children)}}},setFirstNode:function(setting,parentNode){var childKey=setting.data.key.children,childLength=parentNode[childKey].length;childLength>0&&!parentNode[childKey][0].isHidden?parentNode[childKey][0].isFirstNode=!0:childLength>0&&view.setFirstNodeForHide(setting,parentNode[childKey])},setLastNode:function(setting,parentNode){var childKey=setting.data.key.children,childLength=parentNode[childKey].length;childLength>0&&!parentNode[childKey][0].isHidden?parentNode[childKey][childLength-1].isLastNode=!0:childLength>0&&view.setLastNodeForHide(setting,parentNode[childKey])},setFirstNodeForHide:function(setting,nodes){var n,i,j;for(i=0,j=nodes.length;i<j&&!(n=nodes[i]).isFirstNode;i++){if(!n.isHidden&&!n.isFirstNode){n.isFirstNode=!0,view.setNodeLineIcos(setting,n);break}n=null}return n},setFirstNodeForShow:function(setting,nodes){var n,i,j,first,old;for(i=0,j=nodes.length;i<j;i++){if(n=nodes[i],!first&&!n.isHidden&&n.isFirstNode){first=n;break}if(first||n.isHidden||n.isFirstNode){if(first&&n.isFirstNode){n.isFirstNode=!1,old=n,view.setNodeLineIcos(setting,n);break}n=null}else n.isFirstNode=!0,first=n,view.setNodeLineIcos(setting,n)}return{new:first,old:old}},setLastNodeForHide:function(setting,nodes){var n,i;for(i=nodes.length-1;i>=0&&!(n=nodes[i]).isLastNode;i--){if(!n.isHidden&&!n.isLastNode){n.isLastNode=!0,view.setNodeLineIcos(setting,n);break}n=null}return n},setLastNodeForShow:function(setting,nodes){var n,i,last,old;for(i=nodes.length-1;i>=0;i--){if(n=nodes[i],!last&&!n.isHidden&&n.isLastNode){last=n;break}if(last||n.isHidden||n.isLastNode){if(last&&n.isLastNode){n.isLastNode=!1,old=n,view.setNodeLineIcos(setting,n);break}n=null}else n.isLastNode=!0,last=n,view.setNodeLineIcos(setting,n)}return{new:last,old:old}}},data:{initHideForExCheck:function(setting,n){n.isHidden&&setting.check&&setting.check.enable&&(void 0===n._nocheck&&(n._nocheck=!!n.nocheck,n.nocheck=!0),n.check_Child_State=-1,view.repairParentChkClassWithSelf&&view.repairParentChkClassWithSelf(setting,n))},initShowForExCheck:function(setting,n){if(!n.isHidden&&setting.check&&setting.check.enable){if(void 0!==n._nocheck&&(n.nocheck=n._nocheck,delete n._nocheck),view.setChkClass){var checkObj=$$(n,consts.id.CHECK,setting);view.setChkClass(setting,checkObj,n)}view.repairParentChkClassWithSelf&&view.repairParentChkClassWithSelf(setting,n)}}}};$.extend(!0,$.fn.zTree._z,_z);var zt=$.fn.zTree,tools=zt._z.tools,consts=zt.consts,view=zt._z.view,data=zt._z.data,$$=(zt._z.event,tools.$);data.addInitNode(function(setting,level,n,parentNode,isFirstNode,isLastNode,openFlag){"string"==typeof n.isHidden&&(n.isHidden=tools.eqs(n.isHidden,"true")),n.isHidden=!!n.isHidden,data.initHideForExCheck(setting,n)}),data.addBeforeA(function(setting,node,html){}),data.addZTreeTools(function(setting,zTreeTools){zTreeTools.showNodes=function(nodes,options){view.showNodes(setting,nodes,options)},zTreeTools.showNode=function(node,options){node&&view.showNodes(setting,[node],options)},zTreeTools.hideNodes=function(nodes,options){view.hideNodes(setting,nodes,options)},zTreeTools.hideNode=function(node,options){node&&view.hideNodes(setting,[node],options)};var _checkNode=zTreeTools.checkNode;_checkNode&&(zTreeTools.checkNode=function(node,checked,checkTypeFlag,callbackFlag){node&&node.isHidden||_checkNode.apply(zTreeTools,arguments)})});var _dInitNode=data.initNode;data.initNode=function(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag){var children=(parentNode||data.getRoot(setting))[setting.data.key.children];data.tmpHideFirstNode=view.setFirstNodeForHide(setting,children),data.tmpHideLastNode=view.setLastNodeForHide(setting,children),openFlag&&(view.setNodeLineIcos(setting,data.tmpHideFirstNode),view.setNodeLineIcos(setting,data.tmpHideLastNode)),data.tmpHideFirstNode,isLastNode=data.tmpHideLastNode===node,_dInitNode&&_dInitNode.apply(data,arguments),openFlag&&isLastNode&&view.clearOldLastNode(setting,node,openFlag)};var _makeChkFlag=data.makeChkFlag;_makeChkFlag&&(data.makeChkFlag=function(setting,node){node&&node.isHidden||_makeChkFlag.apply(data,arguments)});var _getTreeCheckedNodes=data.getTreeCheckedNodes;_getTreeCheckedNodes&&(data.getTreeCheckedNodes=function(setting,nodes,checked,results){if(nodes&&nodes.length>0){var p=nodes[0].getParentNode();if(p&&p.isHidden)return[]}return _getTreeCheckedNodes.apply(data,arguments)});var _getTreeChangeCheckedNodes=data.getTreeChangeCheckedNodes;_getTreeChangeCheckedNodes&&(data.getTreeChangeCheckedNodes=function(setting,nodes,results){if(nodes&&nodes.length>0){var p=nodes[0].getParentNode();if(p&&p.isHidden)return[]}return _getTreeChangeCheckedNodes.apply(data,arguments)});var _expandCollapseSonNode=view.expandCollapseSonNode;_expandCollapseSonNode&&(view.expandCollapseSonNode=function(setting,node,expandFlag,animateFlag,callback){node&&node.isHidden||_expandCollapseSonNode.apply(view,arguments)});var _setSonNodeCheckBox=view.setSonNodeCheckBox;_setSonNodeCheckBox&&(view.setSonNodeCheckBox=function(setting,node,value,srcNode){node&&node.isHidden||_setSonNodeCheckBox.apply(view,arguments)});var _repairParentChkClassWithSelf=view.repairParentChkClassWithSelf;_repairParentChkClassWithSelf&&(view.repairParentChkClassWithSelf=function(setting,node){node&&node.isHidden||_repairParentChkClassWithSelf.apply(view,arguments)})}(jQuery);