!function(api){"use strict";var fullscreen,config,callbacks={youtube:[]},defaults={enabled:!0,debug:!1,seekTime:10,volume:5,click:!0,tooltips:!0,displayDuration:!0,iconPrefix:"icon",selectors:{container:".player",controls:".player-controls",labels:"[data-player] .sr-only, label .sr-only",buttons:{seek:'[data-player="seek"]',play:'[data-player="play"]',pause:'[data-player="pause"]',restart:'[data-player="restart"]',rewind:'[data-player="rewind"]',forward:'[data-player="fast-forward"]',mute:'[data-player="mute"]',volume:'[data-player="volume"]',captions:'[data-player="captions"]',fullscreen:'[data-player="fullscreen"]'},progress:{container:".player-progress",buffer:".player-progress-buffer",played:".player-progress-played"},captions:".player-captions",currentTime:".player-current-time",duration:".player-duration"},classes:{videoWrapper:"player-video-wrapper",embedWrapper:"player-video-embed",type:"player-{0}",stopped:"stopped",playing:"playing",muted:"muted",loading:"loading",tooltip:"player-tooltip",hidden:"sr-only",hover:"player-hover",captions:{enabled:"captions-enabled",active:"captions-active"},fullscreen:{enabled:"fullscreen-enabled",active:"fullscreen-active",hideControls:"fullscreen-hide-controls"}},captions:{defaultActive:!1},fullscreen:{enabled:!0,fallback:!0,hideControls:!0},storage:{enabled:!0,key:"plyr_volume"},controls:["restart","rewind","play","fast-forward","current-time","duration","mute","volume","fullscreen"],i18n:{restart:"重新播放",rewind:"后退{seektime}秒",play:"播放",pause:"暂停",forward:"快进{seektime}秒",played:"播放中",buffered:"缓冲中",currentTime:"当前时间",duration:"持续时间",volume:"音量",toggleMute:"静音",toggleCaptions:"字幕",toggleFullscreen:"全屏"}};function _log(text,error){config.debug&&window.console&&console[error?"error":"log"](text)}function _browserSniff(){var nameOffset,verOffset,ix,nAgt=navigator.userAgent,name=navigator.appName,fullVersion=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10);return-1!==navigator.appVersion.indexOf("Windows NT")&&-1!==navigator.appVersion.indexOf("rv:11")?(name="IE",fullVersion="11;"):-1!==(verOffset=nAgt.indexOf("MSIE"))?(name="IE",fullVersion=nAgt.substring(verOffset+5)):-1!==(verOffset=nAgt.indexOf("Chrome"))?(name="Chrome",fullVersion=nAgt.substring(verOffset+7)):-1!==(verOffset=nAgt.indexOf("Safari"))?(name="Safari",fullVersion=nAgt.substring(verOffset+7),-1!==(verOffset=nAgt.indexOf("Version"))&&(fullVersion=nAgt.substring(verOffset+8))):-1!==(verOffset=nAgt.indexOf("Firefox"))?(name="Firefox",fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(name=nAgt.substring(nameOffset,verOffset),fullVersion=nAgt.substring(verOffset+1),name.toLowerCase()==name.toUpperCase()&&(name=navigator.appName)),-1!==(ix=fullVersion.indexOf(";"))&&(fullVersion=fullVersion.substring(0,ix)),-1!==(ix=fullVersion.indexOf(" "))&&(fullVersion=fullVersion.substring(0,ix)),majorVersion=parseInt(""+fullVersion,10),isNaN(majorVersion)&&(fullVersion=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10)),{name:name,version:majorVersion,ios:/(iPad|iPhone|iPod)/g.test(navigator.platform)}}function _inArray(haystack,needle){return Array.prototype.indexOf&&-1!=haystack.indexOf(needle)}function _replaceAll(string,find,replace){return string.replace(new RegExp(find.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),replace)}function _remove(element){element.parentNode.removeChild(element)}function _toggleClass(element,name,state){if(element)if(element.classList)element.classList[state?"add":"remove"](name);else{var className=(" "+element.className+" ").replace(/\s+/g," ").replace(" "+name+" ","");element.className=className+(state?" "+name:"")}}function _toggleHandler(element,events,callback,toggle){var eventList=events.split(" ");if(element instanceof NodeList)for(var x=0;x<element.length;x++)element[x]instanceof Node&&_toggleHandler(element[x],arguments[1],arguments[2],arguments[3]);else for(var i=0;i<eventList.length;i++)element[toggle?"addEventListener":"removeEventListener"](eventList[i],callback,!1)}function _on(element,events,callback){element&&_toggleHandler(element,events,callback,!0)}function _triggerEvent(element,event){var fauxEvent=document.createEvent("MouseEvents");fauxEvent.initEvent(event,!0,!0),element.dispatchEvent(fauxEvent)}function _toggleState(target,state){return state="boolean"==typeof state?state:!target.getAttribute("aria-pressed"),target.setAttribute("aria-pressed",state),state}function _getPercentage(current,max){return 0===current||0===max||isNaN(current)||isNaN(max)?0:(current/max*100).toFixed(2)}function _storage(){return{supported:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}()}}function Plyr(container){var player=this;function _seekManualCaptions(time){if(!player.usingTextTracks&&"video"===player.type&&player.supported.full){for(player.subcount=0,time="number"==typeof time?time:player.media.currentTime;_timecodeMax(player.captions[player.subcount][0])<time.toFixed(1);)if(player.subcount++,player.subcount>player.captions.length-1){player.subcount=player.captions.length-1;break}if(player.media.currentTime.toFixed(1)>=_subTcSecs(player.captions[player.subcount][0].split(" --\x3e ")[0])&&player.media.currentTime.toFixed(1)<=_timecodeMax(player.captions[player.subcount][0])){player.currentCaption=player.captions[player.subcount][1];var content=player.currentCaption.trim();player.captionsContainer.innerHTML!=content&&(player.captionsContainer.innerHTML="",player.captionsContainer.innerHTML=content)}else player.captionsContainer.innerHTML=""}}function _timecodeMax(tc){return _subTcSecs(tc.split(" --\x3e ")[1])}function _subTcSecs(tc){if(null===tc||void 0===tc)return 0;var tc2;return tc2=tc.split(",")[0].split(":"),Math.floor(60*tc2[0]*60)+Math.floor(60*tc2[1])+Math.floor(tc2[2])}function _getElements(selector){return player.container.querySelectorAll(selector)}function _getElement(selector){return _getElements(selector)[0]}function _injectControls(){var html=config.html;if(_log("Injecting custom controls."),html||(html=function(){var html=['<div class="player-controls">','<div class="player-progress">','<label for="seek{id}" class="sr-only">Seek</label>','<input id="seek{id}" class="player-progress-seek" type="range" min="0" max="100" step="0.5" value="0" data-player="seek">','<progress class="player-progress-played" max="100" value="0">',"<span>0</span>% "+config.i18n.played,"</progress>",'<progress class="player-progress-buffer" max="100" value="0">',"<span>0</span>% "+config.i18n.buffered,"</progress>","</div>",'<span class="player-controls-left">'];return _inArray(config.controls,"restart")&&html.push('<button type="button" data-player="restart">','<svg><use xlink:href="#'+config.iconPrefix+'-restart" /></svg>','<span class="sr-only">'+config.i18n.restart+"</span>","</button>"),_inArray(config.controls,"rewind")&&html.push('<button type="button" data-player="rewind">','<svg><use xlink:href="#'+config.iconPrefix+'-rewind" /></svg>','<span class="sr-only">'+config.i18n.rewind+"</span>","</button>"),_inArray(config.controls,"play")&&html.push('<button type="button" data-player="play">','<svg><use xlink:href="#'+config.iconPrefix+'-play" /></svg>','<span class="sr-only">'+config.i18n.play+"</span>","</button>",'<button type="button" data-player="pause">','<svg><use xlink:href="#'+config.iconPrefix+'-pause" /></svg>','<span class="sr-only">'+config.i18n.pause+"</span>","</button>"),_inArray(config.controls,"fast-forward")&&html.push('<button type="button" data-player="fast-forward">','<svg><use xlink:href="#'+config.iconPrefix+'-fast-forward" /></svg>','<span class="sr-only">'+config.i18n.forward+"</span>","</button>"),_inArray(config.controls,"current-time")&&html.push('<span class="player-time">','<span class="sr-only">'+config.i18n.currentTime+"</span>",'<span class="player-current-time">00:00</span>',"</span>"),_inArray(config.controls,"duration")&&html.push('<span class="player-time">','<span class="sr-only">'+config.i18n.duration+"</span>",'<span class="player-duration">00:00</span>',"</span>"),html.push("</span>",'<span class="player-controls-right">'),_inArray(config.controls,"mute")&&html.push('<button type="button" data-player="mute">','<svg class="icon-muted"><use xlink:href="#'+config.iconPrefix+'-muted" /></svg>','<svg><use xlink:href="#'+config.iconPrefix+'-volume" /></svg>','<span class="sr-only">'+config.i18n.toggleMute+"</span>","</button>"),_inArray(config.controls,"volume")&&html.push('<label for="volume{id}" class="sr-only">'+config.i18n.volume+"</label>",'<input id="volume{id}" class="player-volume" type="range" min="0" max="10" value="5" data-player="volume">'),_inArray(config.controls,"captions")&&html.push('<button type="button" data-player="captions">','<svg class="icon-captions-on"><use xlink:href="#'+config.iconPrefix+'-captions-on" /></svg>','<svg><use xlink:href="#'+config.iconPrefix+'-captions-off" /></svg>','<span class="sr-only">'+config.i18n.toggleCaptions+"</span>","</button>"),_inArray(config.controls,"fullscreen")&&html.push('<button type="button" data-player="fullscreen">','<svg class="icon-exit-fullscreen"><use xlink:href="#'+config.iconPrefix+'-exit-fullscreen" /></svg>','<svg><use xlink:href="#'+config.iconPrefix+'-enter-fullscreen" /></svg>','<span class="sr-only">'+config.i18n.toggleFullscreen+"</span>","</button>"),html.push("</span>","</div>"),html.join("")}()),html=_replaceAll(html=_replaceAll(html,"{seektime}",config.seekTime),"{id}",Math.floor(1e4*Math.random())),player.container.insertAdjacentHTML("beforeend",html),config.tooltips)for(var labels=_getElements(config.selectors.labels),i=labels.length-1;i>=0;i--){var label=labels[i];_toggleClass(label,config.classes.hidden,!1),_toggleClass(label,config.classes.tooltip,!0)}}function _setupYouTube(id){for(var containers=_getElements('[id^="youtube"]'),i=containers.length-1;i>=0;i--)_remove(containers[i]);var container=document.createElement("div");container.setAttribute("id","youtube-"+Math.floor(1e4*Math.random())),player.media.appendChild(container),_toggleClass(player.media,config.classes.videoWrapper,!0),_toggleClass(player.media,config.classes.embedWrapper,!0),"object"==typeof YT?_YTReady(id,container):(!function(source){if(!document.querySelectorAll('script[src="'+source+'"]').length){var tag=document.createElement("script");tag.src=source;var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}}("https://www.youtube.com/iframe_api"),callbacks.youtube.push(function(){_YTReady(id,container)}),window.onYouTubeIframeAPIReady=function(){for(var i=callbacks.youtube.length-1;i>=0;i--)callbacks.youtube[i](),callbacks.youtube.splice(i,1)})}function _YTReady(id,container){_log("YouTube API Ready"),"timer"in player||(player.timer={}),player.embed=new YT.Player(container.id,{videoId:id,playerVars:{autoplay:0,controls:player.supported.full?0:1,rel:0,showinfo:0,iv_load_policy:3,cc_load_policy:config.captions.defaultActive?1:0,cc_lang_pref:"en",wmode:"transparent",modestbranding:1,disablekb:1},events:{onReady:function(event){var instance=event.target;player.media.play=function(){instance.playVideo()},player.media.pause=function(){instance.pauseVideo()},player.media.stop=function(){instance.stopVideo()},player.media.duration=instance.getDuration(),player.media.paused=!0,player.media.currentTime=instance.getCurrentTime(),player.media.muted=instance.isMuted(),_triggerEvent(player.media,"timeupdate"),window.clearInterval(player.timer.buffering),player.timer.buffering=window.setInterval(function(){player.media.buffered=instance.getVideoLoadedFraction(),_triggerEvent(player.media,"progress"),1===player.media.buffered&&window.clearInterval(player.timer.buffering)},200),player.supported.full&&(player.container.querySelectorAll(config.selectors.controls).length||_setupInterface(),config.displayDuration&&_displayDuration())},onStateChange:function(event){var instance=event.target;switch(window.clearInterval(player.timer.playing),event.data){case 0:player.media.paused=!0,_triggerEvent(player.media,"ended");break;case 1:player.media.paused=!1,_triggerEvent(player.media,"play"),player.timer.playing=window.setInterval(function(){player.media.currentTime=instance.getCurrentTime(),_triggerEvent(player.media,"timeupdate")},200);break;case 2:player.media.paused=!0,_triggerEvent(player.media,"pause")}}}})}function _setupCaptions(){if("video"===player.type){player.videoContainer.insertAdjacentHTML("afterbegin",'<div class="'+config.selectors.captions.replace(".","")+'"><span></span></div>'),player.captionsContainer=_getElement(config.selectors.captions).querySelector("span"),player.usingTextTracks=!1,player.media.textTracks&&(player.usingTextTracks=!0);for(var kind,captionSrc="",children=player.media.childNodes,i=0;i<children.length;i++)"track"===children[i].nodeName.toLowerCase()&&("captions"!==(kind=children[i].kind)&&"subtitles"!==kind||(captionSrc=children[i].getAttribute("src")));if(player.captionExists=!0,""===captionSrc?(player.captionExists=!1,_log("No caption track found.")):_log("Caption track found; URI: "+captionSrc),player.captionExists){for(var tracks=player.media.textTracks,x=0;x<tracks.length;x++)tracks[x].mode="hidden";if(player.buttons.captions&&(_toggleClass(player.container,config.classes.captions.enabled,!0),config.captions.defaultActive&&(_toggleClass(player.container,config.classes.captions.active,!0),_toggleState(player.buttons.captions,!0))),("IE"===player.browser.name&&player.browser.version>=10||"Firefox"===player.browser.name&&player.browser.version>=31||"Chrome"===player.browser.name&&player.browser.version>=43||"Safari"===player.browser.name&&player.browser.version>=7)&&(_log("Detected unsupported browser for HTML5 captions. Using fallback."),player.usingTextTracks=!1),player.usingTextTracks){_log("TextTracks supported.");for(var y=0;y<tracks.length;y++){var track=tracks[y];"captions"!==track.kind&&"subtitles"!==track.kind||_on(track,"cuechange",function(){player.captionsContainer.innerHTML="",this.activeCues[0]&&this.activeCues[0].hasOwnProperty("text")&&player.captionsContainer.appendChild(this.activeCues[0].getCueAsHTML().trim())})}}else if(_log("TextTracks not supported so rendering captions manually."),player.currentCaption="",player.captions=[],""!==captionSrc){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(4===xhr.readyState)if(200===xhr.status){var records,record;records=xhr.responseText.split("\n\n");for(var r=0;r<records.length;r++)record=records[r],player.captions[r]=[],player.captions[r]=record.split("\n");player.captions.shift(),_log("Successfully loaded the caption file via AJAX.")}else _log("There was a problem loading the caption file via AJAX.",!0)},xhr.open("get",captionSrc,!0),xhr.send()}if("Safari"===player.browser.name&&player.browser.version>=7){_log("Safari 7+ detected; removing track from DOM."),tracks=player.media.getElementsByTagName("track");for(var t=0;t<tracks.length;t++)player.media.removeChild(tracks[t])}}else _toggleClass(player.container,config.classes.captions.enabled)}}function _setupFullscreen(){if("audio"!=player.type&&config.fullscreen.enabled){var nativeSupport=fullscreen.supportsFullScreen;nativeSupport||config.fullscreen.fallback&&!function(){try{return window.self!==window.top}catch(e){return!0}}()?(_log((nativeSupport?"Native":"Fallback")+" fullscreen enabled."),_toggleClass(player.container,config.classes.fullscreen.enabled,!0)):_log("Fullscreen not supported and fallback disabled."),_toggleState(player.buttons.fullscreen,!1),config.fullscreen.hideControls&&_toggleClass(player.container,config.classes.fullscreen.hideControls,!0)}}function _play(){player.media.play()}function _pause(){player.media.pause()}function _rewind(seekTime){"number"!=typeof seekTime&&(seekTime=config.seekTime),_seek(player.media.currentTime-seekTime)}function _forward(seekTime){"number"!=typeof seekTime&&(seekTime=config.seekTime),_seek(player.media.currentTime+seekTime)}function _seek(input){var targetTime=0,paused=player.media.paused;"number"==typeof input?targetTime=input:"object"!=typeof input||"input"!==input.type&&"change"!==input.type||(targetTime=input.target.value/input.target.max*player.media.duration),targetTime<0?targetTime=0:targetTime>player.media.duration&&(targetTime=player.media.duration);try{player.media.currentTime=targetTime.toFixed(1)}catch(e){}"youtube"==player.type&&(player.embed.seekTo(targetTime),paused&&_pause(),_triggerEvent(player.media,"timeupdate")),_log("Seeking to "+player.media.currentTime+" seconds"),_seekManualCaptions(targetTime)}function _checkPlaying(){_toggleClass(player.container,config.classes.playing,!player.media.paused),_toggleClass(player.container,config.classes.stopped,player.media.paused)}function _toggleFullscreen(event){var element,nativeSupport=fullscreen.supportsFullScreen;event&&event.type===fullscreen.fullScreenEventName?player.isFullscreen=fullscreen.isFullScreen(player.container):nativeSupport?(fullscreen.isFullScreen(player.container)?fullscreen.cancelFullScreen():fullscreen.requestFullScreen(player.container),player.isFullscreen=fullscreen.isFullScreen(player.container)):(player.isFullscreen=!player.isFullscreen,player.isFullscreen?(_on(document,"keyup",_handleEscapeFullscreen),document.body.style.overflow="hidden"):((element=document)&&_toggleHandler(element,"keyup",_handleEscapeFullscreen,!1),document.body.style.overflow="")),_toggleClass(player.container,config.classes.fullscreen.active,player.isFullscreen),_toggleState(player.buttons.fullscreen,player.isFullscreen);var hoverTimer,isMouseOver=!1;config.fullscreen.hideControls&&(_toggleClass(player.controls,config.classes.hover,!1),_toggleHandler(player.controls,"mouseenter mouseleave",function(event){isMouseOver="mouseenter"===event.type},player.isFullscreen),_toggleHandler(player.container,"mousemove",function(){_toggleClass(player.container,config.classes.hover,!0),window.clearTimeout(hoverTimer),isMouseOver||(hoverTimer=window.setTimeout(function(){_toggleClass(player.container,config.classes.hover,!1)},2e3))},player.isFullscreen))}function _handleEscapeFullscreen(event){27===(event.which||event.charCode||event.keyCode)&&player.isFullscreen&&_toggleFullscreen()}function _setVolume(volume){void 0===volume&&(volume=config.storage.enabled&&_storage().supported&&window.localStorage[config.storage.key]||config.volume),volume>10&&(volume=10),volume<0&&(volume=0),player.media.volume=parseFloat(volume/10),"youtube"==player.type&&(player.embed.setVolume(100*player.media.volume),_triggerEvent(player.media,"volumechange")),player.media.muted&&volume>0&&_toggleMute()}function _toggleMute(muted){"boolean"!=typeof muted&&(muted=!player.media.muted),_toggleState(player.buttons.mute,muted),player.media.muted=muted,"youtube"===player.type&&(player.embed[player.media.muted?"mute":"unMute"](),_triggerEvent(player.media,"volumechange"))}function _updateVolume(){var volume=player.media.muted?0:10*player.media.volume;player.supported.full&&player.volume&&(player.volume.value=volume),config.storage.enabled&&_storage().supported&&window.localStorage.setItem(config.storage.key,volume),_toggleClass(player.container,config.classes.muted,0===volume),player.supported.full&&player.buttons.mute&&_toggleState(player.buttons.mute,0===volume)}function _toggleCaptions(show){player.supported.full&&player.buttons.captions&&("boolean"!=typeof show&&(show=-1===player.container.className.indexOf(config.classes.captions.active)),_toggleState(player.buttons.captions,show),_toggleClass(player.container,config.classes.captions.active,show))}function _checkLoading(event){var loading="waiting"===event.type;clearTimeout(player.loadingTimer),player.loadingTimer=setTimeout(function(){_toggleClass(player.container,config.classes.loading,loading)},loading?250:0)}function _updateProgress(event){var buffered,progress=player.progress.played.bar,text=player.progress.played.text,value=0;if(event)switch(event.type){case"timeupdate":case"seeking":value=_getPercentage(player.media.currentTime,player.media.duration),"timeupdate"==event.type&&player.buttons.seek&&(player.buttons.seek.value=value);break;case"change":case"input":value=event.target.value;break;case"playing":case"progress":progress=player.progress.buffer.bar,text=player.progress.buffer.text,value=(buffered=player.media.buffered)&&buffered.length?_getPercentage(buffered.end(0),player.media.duration):"number"==typeof buffered?100*buffered:0}progress&&(progress.value=value),text&&(text.innerHTML=value)}function _updateTimeDisplay(time,element){if(element){player.secs=parseInt(time%60),player.mins=parseInt(time/60%60),player.hours=parseInt(time/60/60%60);var displayHours=parseInt(player.media.duration/60/60%60)>0;player.secs=("0"+player.secs).slice(-2),player.mins=("0"+player.mins).slice(-2),element.innerHTML=(displayHours?player.hours+":":"")+player.mins+":"+player.secs}}function _displayDuration(){var duration=player.media.duration||0;!player.duration&&config.displayDuration&&player.media.paused&&_updateTimeDisplay(duration,player.currentTime),player.duration&&_updateTimeDisplay(duration,player.duration)}function _timeUpdate(event){_updateTimeDisplay(player.media.currentTime,player.currentTime),_updateProgress(event)}function _addSource(attributes){if(attributes.src){var element=document.createElement("source");!function(element,attributes){for(var key in attributes)element.setAttribute(key,attributes[key])}(element,attributes),function(parent,element){parent.insertBefore(element,parent.firstChild)}(player.media,element)}}function _listeners(){var inputEvent="IE"==player.browser.name?"change":"input";for(var button in _on(window,"keyup",function(event){9==(event.keyCode?event.keyCode:event.which)&&function(){var focused=document.activeElement;for(var button in focused&&focused!=document.body?document.querySelector&&(focused=document.querySelector(":focus")):focused=null,player.buttons){var element=player.buttons[button];_toggleClass(element,"tab-focus",element===focused)}}()}),player.buttons){var element=player.buttons[button];_on(element,"blur",function(){_toggleClass(element,"tab-focus",!1)})}_on(player.buttons.play,"click",function(){_play(),setTimeout(function(){player.buttons.pause.focus()},100)}),_on(player.buttons.pause,"click",function(){_pause(),setTimeout(function(){player.buttons.play.focus()},100)}),_on(player.buttons.restart,"click",_seek),_on(player.buttons.rewind,"click",_rewind),_on(player.buttons.forward,"click",_forward),_on(player.buttons.seek,inputEvent,_seek),_on(player.volume,inputEvent,function(){_setVolume(this.value)}),_on(player.buttons.mute,"click",_toggleMute),_on(player.buttons.fullscreen,"click",_toggleFullscreen),fullscreen.supportsFullScreen&&_on(document,fullscreen.fullScreenEventName,_toggleFullscreen),_on(player.media,"timeupdate seeking",_timeUpdate),_on(player.media,"timeupdate",_seekManualCaptions),_on(player.media,"loadedmetadata",_displayDuration),_on(player.buttons.captions,"click",_toggleCaptions),_on(player.media,"ended",function(){"video"===player.type&&(player.captionsContainer.innerHTML=""),_checkPlaying()}),_on(player.media,"progress playing",_updateProgress),_on(player.media,"volumechange",_updateVolume),_on(player.media,"play pause",_checkPlaying),_on(player.media,"waiting canplay seeked",_checkLoading),"video"===player.type&&config.click&&_on(player.videoContainer,"click",function(){player.media.paused?_triggerEvent(player.buttons.play,"click"):player.media.ended?(_seek(),_triggerEvent(player.buttons.play,"click")):_triggerEvent(player.buttons.pause,"click")})}function _init(){if(player.init)return null;fullscreen=function(){var fullscreen={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",element:null,prefix:""},browserPrefixes="webkit moz o ms khtml".split(" ");if(void 0!==document.cancelFullScreen)fullscreen.supportsFullScreen=!0;else for(var i=0,il=browserPrefixes.length;i<il;i++){if(fullscreen.prefix=browserPrefixes[i],void 0!==document[fullscreen.prefix+"CancelFullScreen"]){fullscreen.supportsFullScreen=!0;break}if(void 0!==document.msExitFullscreen&&document.msFullscreenEnabled){fullscreen.prefix="ms",fullscreen.supportsFullScreen=!0;break}}return fullscreen.supportsFullScreen&&(fullscreen.fullScreenEventName="ms"==fullscreen.prefix?"MSFullscreenChange":fullscreen.prefix+"fullscreenchange",fullscreen.isFullScreen=function(element){switch(void 0===element&&(element=document.body),this.prefix){case"":return document.fullscreenElement==element;case"moz":return document.mozFullScreenElement==element;default:return document[this.prefix+"FullscreenElement"]==element}},fullscreen.requestFullScreen=function(element){return void 0===element&&(element=document.body),""===this.prefix?element.requestFullScreen():element[this.prefix+("ms"==this.prefix?"RequestFullscreen":"RequestFullScreen")]()},fullscreen.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+("ms"==this.prefix?"ExitFullscreen":"CancelFullScreen")]()},fullscreen.element=function(){return""===this.prefix?document.fullscreenElement:document[this.prefix+"FullscreenElement"]}),fullscreen}(),player.browser=_browserSniff(),player.media=player.container.querySelectorAll("audio, video, div")[0];var tagName=player.media.tagName.toLowerCase();if(player.type="div"===tagName?player.media.getAttribute("data-type"):tagName,player.supported=api.supported(player.type),!player.supported.basic)return!1;if(_log(player.browser.name+" "+player.browser.version),function(){if(!player.media)return _log("No audio or video element found!",!0),!1;if(player.supported.full&&(player.media.removeAttribute("controls"),_toggleClass(player.container,config.classes.type.replace("{0}",player.type),!0),_toggleClass(player.container,config.classes.stopped,null===player.media.getAttribute("autoplay")),player.browser.ios&&_toggleClass(player.container,"ios",!0),"video"===player.type)){var wrapper=document.createElement("div");wrapper.setAttribute("class",config.classes.videoWrapper),function(elements,wrapper){elements.length||(elements=[elements]);for(var i=elements.length-1;i>=0;i--){var child=i>0?wrapper.cloneNode(!0):wrapper,element=elements[i],parent=element.parentNode,sibling=element.nextSibling;child.appendChild(element),sibling?parent.insertBefore(child,sibling):parent.appendChild(child)}}(player.media,wrapper),player.videoContainer=wrapper}"youtube"==player.type&&_setupYouTube(player.media.getAttribute("data-video-id")),null!==player.media.getAttribute("autoplay")&&_play()}(),"video"==player.type||"audio"==player.type){if(!player.supported.full)return void(player.init=!0);_setupInterface(),config.displayDuration&&_displayDuration(),function(){if(player.buttons.play){var label=player.buttons.play.innerText||config.i18n.play;void 0!==config.title&&config.title.length&&(label+=", "+config.title),player.buttons.play.setAttribute("aria-label",label)}}()}player.init=!0}function _setupInterface(){if(_injectControls(),!function(){try{return player.controls=_getElement(config.selectors.controls),player.buttons={},player.buttons.seek=_getElement(config.selectors.buttons.seek),player.buttons.play=_getElement(config.selectors.buttons.play),player.buttons.pause=_getElement(config.selectors.buttons.pause),player.buttons.restart=_getElement(config.selectors.buttons.restart),player.buttons.rewind=_getElement(config.selectors.buttons.rewind),player.buttons.forward=_getElement(config.selectors.buttons.forward),player.buttons.fullscreen=_getElement(config.selectors.buttons.fullscreen),player.buttons.mute=_getElement(config.selectors.buttons.mute),player.buttons.captions=_getElement(config.selectors.buttons.captions),player.checkboxes=_getElements('[type="checkbox"]'),player.progress={},player.progress.container=_getElement(config.selectors.progress.container),player.progress.buffer={},player.progress.buffer.bar=_getElement(config.selectors.progress.buffer),player.progress.buffer.text=player.progress.buffer.bar&&player.progress.buffer.bar.getElementsByTagName("span")[0],player.progress.played={},player.progress.played.bar=_getElement(config.selectors.progress.played),player.progress.played.text=player.progress.played.bar&&player.progress.played.bar.getElementsByTagName("span")[0],player.volume=_getElement(config.selectors.buttons.volume),player.duration=_getElement(config.selectors.duration),player.currentTime=_getElement(config.selectors.currentTime),player.seekTime=_getElements(config.selectors.seekTime),!0}catch(e){return _log("It looks like there's a problem with your controls html. Bailing.",!0),player.media.setAttribute("controls",""),!1}}())return!1;_setupCaptions(),_setVolume(),_updateVolume(),_setupFullscreen(),_listeners()}return player.container=container,_init(),player.init?{media:player.media,play:_play,pause:_pause,restart:_seek,rewind:_rewind,forward:_forward,seek:_seek,source:function(sources){if("youtube"===player.type&&"string"==typeof sources)return player.embed.destroy(),_setupYouTube(sources),void _timeUpdate();if(_pause(),_seek(),function(){for(var sources=player.media.querySelectorAll("source"),i=sources.length-1;i>=0;i--)_remove(sources[i]);player.media.removeAttribute("src")}(),"string"==typeof sources)_addSource({src:sources});else if(sources.constructor===Array)for(var index in sources)_addSource(sources[index]);player.supported.full&&(_timeUpdate(),_checkPlaying()),player.media.load(),null!==player.media.getAttribute("autoplay")&&_play()},poster:function(source){"video"===player.type&&player.media.setAttribute("poster",source)},setVolume:_setVolume,togglePlay:function(toggle){!0===toggle?_play():!1===toggle?_pause():player.media[player.media.paused?"play":"pause"]()},toggleMute:_toggleMute,toggleCaptions:_toggleCaptions,toggleFullscreen:_toggleFullscreen,isFullscreen:function(){return player.isFullscreen||!1},support:function(mimeType){return function(player,mimeType){var media=player.media;if("video"==player.type)switch(mimeType){case"video/webm":return!(!media.canPlayType||!media.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""));case"video/mp4":return!(!media.canPlayType||!media.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""));case"video/ogg":return!(!media.canPlayType||!media.canPlayType('video/ogg; codecs="theora"').replace(/no/,""))}else if("audio"==player.type)switch(mimeType){case"audio/mpeg":return!(!media.canPlayType||!media.canPlayType("audio/mpeg;").replace(/no/,""));case"audio/ogg":return!(!media.canPlayType||!media.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""));case"audio/wav":return!(!media.canPlayType||!media.canPlayType('audio/wav; codecs="1"').replace(/no/,""))}return!1}(player,mimeType)},destroy:function(){if(!player.init)return null;if(player.container.setAttribute("class",config.selectors.container.replace(".","")),player.init=!1,_remove(_getElement(config.selectors.controls)),"youtube"!==player.type){"video"===player.type&&(_remove(_getElement(config.selectors.captions)),function(wrapper){for(var parent=wrapper.parentNode;wrapper.firstChild;)parent.insertBefore(wrapper.firstChild,wrapper);parent.removeChild(wrapper)}(player.videoContainer)),player.media.setAttribute("controls","");var clone=player.media.cloneNode(!0);player.media.parentNode.replaceChild(clone,player.media)}else player.embed.destroy()},restore:_init}:{}}api.supported=function(type){var basic,full,browser=_browserSniff(),oldIE="IE"===browser.name&&browser.version<=9,iPhone=/iPhone|iPod/i.test(navigator.userAgent),audio=!!document.createElement("audio").canPlayType,video=!!document.createElement("video").canPlayType;switch(type){case"video":full=(basic=video)&&!oldIE&&!iPhone;break;case"audio":full=(basic=audio)&&!oldIE;break;case"youtube":basic=!0,full=!oldIE&&!iPhone;break;default:full=(basic=audio&&video)&&!oldIE}return{basic:basic,full:full}},api.setup=function(options){if(!(config=function _extend(destination,source){for(var property in source)source[property]&&source[property].constructor&&source[property].constructor===Object?(destination[property]=destination[property]||{},_extend(destination[property],source[property])):destination[property]=source[property];return destination}(defaults,options)).enabled||!api.supported().basic)return!1;for(var elements=document.querySelectorAll(config.selectors.container),players=[],i=elements.length-1;i>=0;i--){var element=elements[i];if(void 0===element.plyr){var instance=new Plyr(element);element.plyr=!!Object.keys(instance).length&&instance,"function"==typeof config.onSetup&&config.onSetup.apply(element.plyr)}players.push(element.plyr)}return players}}(this.plyr=this.plyr||{});